<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Kalinga Connect PWA - Home</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Custom Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'kalinga-primary': '#b425aa',
                        'kalinga-accent': '#c80ec9',
                        'kalinga-gold': '#D4AF37',
                    },
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    
    <style>
        body {
            background-color: #f0f4f8; /* Light gray background */
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header & Navigation -->
    <header class="bg-kalinga-primary shadow-xl sticky top-0 z-10">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center">
            
            <!-- Logo/Title -->
            <div class="flex items-center">
                <img src="https://appimize.app/assets/apps/user_1097/images/b2e254093bca_935_1097.png" alt="Kalinga Connect Logo" class="h-8 w-8 rounded-full mr-2">
                <h1 class="text-xl font-extrabold text-white">Kalinga Connect</h1>
            </div>

            <!-- Navigation Links -->
            <nav class="flex space-x-4">
                <!-- Home is active -->
                <a href="index.html" class="nav-button text-kalinga-gold hover:text-white font-semibold transition duration-150">
                    Home
                </a>
                <!-- SCREENING LINK -->
                <a href="screening.html" class="nav-button text-white hover:text-kalinga-gold font-semibold transition duration-150">
                    Screening
                </a>
                <!-- LOCATOR LINK: Header Navigation -->
                <a href="https://cognitioplus.github.io/kalinga-connect/locator.html" target="_blank" class="nav-button text-white hover:text-kalinga-gold font-semibold transition duration-150">
                    Locator
                </a>
                <!-- SUPPORT LINK: Navigates to the separate support.html file -->
                <a href="support.html" class="nav-button text-white hover:text-kalinga-gold font-semibold transition duration-150">
                    Support
                </a>
            </nav>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow container mx-auto p-4 sm:p-6 lg:p-8">
        
        <!-- Home View -->
        <div id="view-home" class="view-content">
            <div class="bg-white p-8 md:p-12 rounded-xl shadow-2xl border-t-8 border-kalinga-accent text-center">
                <h2 class="text-4xl md:text-5xl font-extrabold text-kalinga-primary mb-4">Welcome to Kalinga Connect</h2>
                <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
                    Your personal digital companion for substance abuse recovery. Find accredited centers, track your progress, and get supportive guidance informed by professional behavioral models.
                </p>
                <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                    <!-- LOCATOR LINK: Central Button -->
                    <a href="https://cognitioplus.github.io/kalinga-connect/locator.html" target="_blank" class="
                        inline-flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-xl shadow-lg 
                        text-white bg-kalinga-accent hover:bg-kalinga-primary transition duration-300 transform hover:scale-105
                        focus:outline-none focus:ring-4 focus:ring-kalinga-accent focus:ring-opacity-50">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.828 0l-4.243-4.243m10.606-10.606L13.414 3.1a1.998 1.998 0 00-2.828 0l-4.243 4.243m10.606 10.606l4.243-4.243a1.998 1.998 0 000-2.828l-4.243-4.243m-10.606 10.606L3.1 13.414a1.998 1.998 0 010-2.828l4.243-4.243m10.606 10.606a4 4 0 11-5.656-5.656 4 4 0 015.656 5.656z"></path></svg>
                        View Accredited Locator
                    </a>
                    <!-- SUPPORT LINK: Central Button navigates to support.html -->
                    <a href="support.html" class="
                        inline-flex items-center justify-center px-8 py-3 border border-kalinga-primary text-base font-medium rounded-xl shadow-lg 
                        text-kalinga-primary bg-white hover:bg-kalinga-primary hover:text-white transition duration-300 transform hover:scale-105
                        focus:outline-none focus:ring-4 focus:ring-kalinga-primary focus:ring-opacity-50">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9.228a2 2 0 012.828 0l.135.135a.5.5 0 00.354.147H14a1 1 0 011 1v2a1 1 0 01-1 1h-1.583a.5.5 0 00-.354.147l-.135.135a2 2 0 01-2.828 0 2 2 0 010-2.828zM12 21a9 9 0 100-18 9 9 0 000 18z"></path></svg>
                        Talk to Kalinga AI Chat
                    </a>
                </div>
            </div>

            <!-- Recovery Tools Section -->
            <div class="mt-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                
                <!-- Tool 1: Substance Abuse Vulnerability Screening Tool -->
                <!-- The link here points to the external tool URL, and the internal content is now structured with the button -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-kalinga-accent hover:shadow-xl transition duration-300 flex flex-col justify-between">
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2 flex items-start">
                            <svg class="w-6 h-6 flex-shrink-0 mr-2 mt-1 text-kalinga-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.001 12.001 0 002 15c0 4.288 3.238 8.077 7.618 9.043C11.163 24.364 12 24 12 24c4.762-1.071 8.001-4.855 8.001-9.043a12.001 12.001 0 00-2.383-8.043z"></path></svg>
                            <span>Substance Abuse Vulnerability Screening Tool</span>
                        </h3>
                        <p class="text-gray-600 mb-4">A quick, confidential tool to assess potential vulnerability and risk level.</p>
                    </div>
                    <a href="https://cognitioplus.aiwaapp.live/kalinga-screening" target="_blank" class="text-center py-2 px-4 rounded-lg text-sm font-semibold text-white bg-kalinga-accent hover:bg-kalinga-primary transition duration-300 shadow-md hover:shadow-lg mt-auto">
                        START THE TOOL
                    </a>
                </div>
                
                <!-- Tool 2: Smart Emotion Tracker -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-kalinga-gold hover:shadow-xl transition duration-300 flex flex-col justify-between">
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2 flex items-start">
                            <svg class="w-6 h-6 flex-shrink-0 mr-2 mt-1 text-kalinga-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v14m-12 5h12m-12 0L9 19m12 3v-3m0-12V3"></path></svg>
                            <span>Smart Emotion Tracker</span>
                        </h3>
                        <p class="text-gray-600 mb-4">Log your daily mood, triggers, and accomplishments to visualize your recovery journey.</p>
                    </div>
                    <a href="https://cognitioplus.aiwaapp.live/smart-emotion-tracker" target="_blank" class="text-center py-2 px-4 rounded-lg text-sm font-semibold text-white bg-kalinga-accent hover:bg-kalinga-primary transition duration-300 shadow-md hover:shadow-lg mt-auto">
                        LOG AND TRACK EMOTIONS
                    </a>
                </div>

                <!-- Tool 3: Habit Design Studio -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-kalinga-gold hover:shadow-xl transition duration-300 flex flex-col justify-between">
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2 flex items-start">
                            <svg class="w-6 h-6 flex-shrink-0 mr-2 mt-1 text-kalinga-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                            <span>Habit Design Studio</span>
                        </h3>
                        <p class="text-gray-600 mb-4">Access research-backed techniques to manage cravings and design resilient habits.</p>
                    </div>
                    <a href="https://cognitioplus.aiwaapp.live/habit-design-studio" target="_blank" class="text-center py-2 px-4 rounded-lg text-sm font-semibold text-white bg-kalinga-accent hover:bg-kalinga-primary transition duration-300 shadow-md hover:shadow-lg mt-auto">
                        DESIGN A HABIT
                    </a>
                </div>

                <!-- Tool 4: Well-Be: Measure and Manage Stress -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-kalinga-gold hover:shadow-xl transition duration-300 flex flex-col justify-between">
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2 flex items-start">
                            <svg class="w-6 h-6 flex-shrink-0 mr-2 mt-1 text-kalinga-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                            <span>Well-Be: Measure and Manage Stress</span>
                        </h3>
                        <p class="text-gray-600 mb-4">Measure your stress levels with Heart Rate Variability using just your smartphone camera.</p>
                    </div>
                    <a href="https://cognitioplus.aiwaapp.live/well-be" target="_blank" class="text-center py-2 px-4 rounded-lg text-sm font-semibold text-white bg-kalinga-accent hover:bg-kalinga-primary transition duration-300 shadow-md hover:shadow-lg mt-auto">
                        MEASURE STRESS
                    </a>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Firebase Initialization -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        
        if (Object.keys(firebaseConfig).length > 0) {
            try {
                const app = initializeApp(firebaseConfig);
                const auth = getAuth(app);
                
                // Sign in logic
                if (initialAuthToken) {
                    signInWithCustomToken(auth, initialAuthToken).catch(e => console.error("Firebase Custom Auth Error:", e));
                } else {
                    signInAnonymously(auth).catch(e => console.error("Firebase Anonymous Auth Error:", e));
                }
            } catch (error) {
                console.error("Failed to initialize Firebase:", error);
            }
        } else {
            console.warn("Firebase config is missing.");
        }
    </script>
</body>
</html>
